# API 手册

> 这里的 “API” 指的是桌面 App 内部的“前端 ↔ 后端（Tauri）”调用，不是对外的 HTTP 接口。

## 概述

MVP 预计提供这些能力：
- 读取/保存配置
- 测试 SSH 连接
- 启动一次同步任务（并回传进度与结果）
- 读取历史记录与日志
- 一键生成/读取 SSH 公钥（用于“设备向导”）

## 认证方式

不做账号体系。
SSH 认证使用**密钥文件路径**（不会把私钥内容保存进配置）。

## 接口列表（草案）

### Config

#### `config_get`
**描述:** 读取本机配置（`.agentsync/config.json`）。

#### `config_save`
**描述:** 保存配置。

### Connection

#### `connection_test`
**描述:** 用当前配置测试是否能通过 SFTP 连到目标电脑，并检查目录可写。

### Sync

#### `sync_run`
**描述:** 运行一次同步（单向推送）。  
**要点:** 默认镜像删除，但对“将被删除/覆盖”的文件做备份。

### Logs

#### `runs_list`
**描述:** 列出历史运行记录（按时间）。

#### `run_log_read`
**描述:** 读取某次运行的日志文本。

### SSH Keys

#### `ssh_keypair_ensure`
**描述:** 在本机生成/复用 AgentSync 专用 SSH 密钥（ed25519），并返回公钥。

#### `ssh_public_key_read`
**描述:** 给定私钥路径，读取对应公钥（优先读 `*.pub`，否则调用 `ssh-keygen -y`）。

### Share（局域网分享）

#### `share_start`
**描述:** 把一段文本生成“局域网临时链接”。在目标电脑浏览器打开后可复制（用于把初始化命令从源电脑传过去）。
