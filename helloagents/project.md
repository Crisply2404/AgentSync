# 项目技术约定

## 1. 这是个什么项目

AgentSync 是一个跨平台（Windows / macOS / Linux）的“单向同步工具”。
第一版目标是：在**源电脑**上点“一键同步”，把你选中的内容通过 SSH（SFTP）推到**目标电脑**。

同步内容（可勾选）：
- 项目文件夹（可多个）
- Codex：`config.toml` + `sessions/`（聊天记录）
- `.agents/`（技能/工具配置）

---

## 2. 技术栈（MVP 计划）

- 桌面壳：Tauri
- 前端：React + TypeScript（Vite）
- 同步引擎：rclone（SFTP 模式）

说明（大白话）：
- Tauri 负责做“桌面应用外壳”，让网页界面变成桌面 App。
- rclone 负责做“真正的文件同步”，我们尽量不自己造轮子。

---

## 3. 配置与数据存放

MVP 建议存放位置（后续可调整）：
- App 配置：用户目录下的 `.agentsync/config.json`
- 运行日志：`.agentsync/logs/`
- 运行历史：`.agentsync/history.jsonl`

（这些都属于“本机文件”，不会自动上传到别的地方，除非你把它也加入同步项。）

---

## 4. 同步规则（关键）

### 4.1 单向同步
- 只有“源 → 目标”这一条方向。
- 谁是“源”由你决定：你在哪台机器点同步，那台就是源。

### 4.2 镜像删除（默认开启）
目标端会变得跟源端一模一样：
- 源端没有的文件，目标端会被“删除/移走”
- 源端改了的文件，目标端会被覆盖

### 4.3 破坏性操作必须可恢复
为了避免误删不可找回：
- 任何“会被删除/被覆盖”的目标端文件，都会先被放进“备份目录”
- 默认保留一段时间（例如 7 天），到期可自动清理（MVP 可先不做自动清理）

---

## 5. 默认排除（建议）

项目同步默认排除这些“装出来/编出来”的目录或垃圾文件（可在 UI 里改）：
- `node_modules/`
- `dist/`
- `build/`
- `.venv/`
- `.git/`
- `.DS_Store`

